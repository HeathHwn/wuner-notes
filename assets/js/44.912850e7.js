(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{339:function(t,s,a){t.exports=a.p+"assets/img/1.7db7368a.png"},668:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vue-3-x-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-3-x-介绍"}},[t._v("#")]),t._v(" Vue 3.x 介绍")]),t._v(" "),n("h2",{attrs:{id:"vue-js-3-x-源码组织方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-js-3-x-源码组织方式"}},[t._v("#")]),t._v(" Vue.js 3.x 源码组织方式")]),t._v(" "),n("ul",[n("li",[t._v("源码采用 TypeScript 重写")]),t._v(" "),n("li",[t._v("使用 Monorepo 管理项目结构")])]),t._v(" "),n("h3",{attrs:{id:"packages-目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#packages-目录结构"}},[t._v("#")]),t._v(" packages 目录结构")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("packages\n|----compiler-core.....和平台无关的编译器\n|----compiler-dom......浏览器平台下的编译器，依赖于compiler-core\n|----compiler-sfc......sfc(SingleFileComponent)是单文件组件的意思，用来编译单文件组件，依赖于compiler-core和compiler-dom\n|----compiler-ssr......服务端渲染编译器，依赖于compiler-dom\n|----reactivity........数据响应式系统，可独立使用\n|----runtime-core......和平台无关的运行时\n|----runtime-dom.......针对浏览器的运行时，处理原生 dom api 事件等\n|----runtime-test......是一个专门为测试编译的轻量级运行时，由于这个运行时渲染出来的 DOM 树其实是一个JS 对象，所以这个js 对象可以运行在所有的环境里，可以用来测试是否渲染正确，可以用来序列化dom 以及记录某次dom 中的操作\n|----server-renderer...服务端渲染\n|----shared............vue内部使用公共api\n|----size-check........私有的包，不会发布到npm上，用于在tree shake后，检查包的大小\n|----template-explorer.浏览器里运行的实时编译组件，会输出render函数\n|----vue...............用来构建完整版的vue，依赖于compiler和runtime\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("h2",{attrs:{id:"vue3-x-不同构建版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue3-x-不同构建版本"}},[t._v("#")]),t._v(" Vue3.x 不同构建版本")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Vue3.x")]),t._v(" 和 "),n("code",[t._v("Vue2.x")]),t._v(" 构建版本时，"),n("code",[t._v("Vue3.x")]),t._v(" 不再构建 UMD 模式、因为 UMD 模块化模式，会让代码冗余")]),t._v(" "),n("li",[t._v("在 packages dist 目录文件中，存放了 "),n("code",[t._v("Vue3.x")]),t._v(" 的所有构建版本")])]),t._v(" "),n("h3",{attrs:{id:"cjs-commonjs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cjs-commonjs"}},[t._v("#")]),t._v(" cjs(CommonJS)")]),t._v(" "),n("ul",[n("li",[t._v("vue.cjs.js——开发版，代码未压缩")]),t._v(" "),n("li",[t._v("vue.cjs.prod.js——生产版，代码压缩")])]),t._v(" "),n("h3",{attrs:{id:"global"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#global"}},[t._v("#")]),t._v(" global")]),t._v(" "),n("p",[t._v("可通过 "),n("code",[t._v("script")]),t._v(" 标签导入，导入后，会增加一个全局的 "),n("code",[t._v("vue")]),t._v(" 对象")]),t._v(" "),n("ul",[n("li",[t._v("完整版 "),n("code",[t._v("vue")]),t._v("，包括运行时和编译器\n"),n("ul",[n("li",[t._v("vue.global.js——开发版，代码未压缩")]),t._v(" "),n("li",[t._v("vue.global.prod.js——生产版，代码压缩")])])]),t._v(" "),n("li",[t._v("只有运行时\n"),n("ul",[n("li",[t._v("vue.runtime.global.js——开发版，代码未压缩")]),t._v(" "),n("li",[t._v("vue.runtime.global.prod.js——生产版，代码压缩")])])])]),t._v(" "),n("h3",{attrs:{id:"browser"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#browser"}},[t._v("#")]),t._v(" browser")]),t._v(" "),n("ul",[n("li",[t._v("浏览器原生模块化的方式，可通过 "),n("code",[t._v("script")]),t._v(" 标签导入")]),t._v(" "),n("li",[t._v("esm--\x3eEsModule")]),t._v(" "),n("li",[t._v("完整版 "),n("code",[t._v("vue")]),t._v("，包括运行时和编译器\n"),n("ul",[n("li",[t._v("vue.esm-browser.js")]),t._v(" "),n("li",[t._v("vue.esm-browser.prod.js")])])]),t._v(" "),n("li",[t._v("只有运行时\n"),n("ul",[n("li",[t._v("vue.runtime.esm-browser.js")]),t._v(" "),n("li",[t._v("vue.runtime.esm-browser.prod.js")])])])]),t._v(" "),n("h3",{attrs:{id:"bundler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bundler"}},[t._v("#")]),t._v(" bundler")]),t._v(" "),n("ul",[n("li",[t._v("未打包所有代码，需要配合打包工具使用")]),t._v(" "),n("li",[t._v("内部通过 import 的方式导入 runtime-core")]),t._v(" "),n("li",[t._v("vue.esm-bundler.js\n"),n("ul",[n("li",[t._v("内部还导入了 runtime-compiler")])])]),t._v(" "),n("li",[t._v("vue.runtime.esm-bundler.js\n"),n("ul",[n("li",[t._v("只导入了运行时")]),t._v(" "),n("li",[t._v("vue 的最小版本")]),t._v(" "),n("li",[t._v("脚手架默认导入的是该文件")])])])]),t._v(" "),n("h2",{attrs:{id:"composition-api-设计动机"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composition-api-设计动机"}},[t._v("#")]),t._v(" Composition API 设计动机")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://github.com/vuejs/rfcs",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC"),n("OutboundLink")],1),t._v(" (Request For Comments) 通过 RFC 的确认")])]),t._v(" "),n("li",[n("p",[t._v("Composition "),n("a",{attrs:{href:"https://composition-api.vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("API"),n("OutboundLink")],1),t._v(" RFC")])])]),t._v(" "),n("h3",{attrs:{id:"设计动机"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设计动机"}},[t._v("#")]),t._v(" 设计动机")]),t._v(" "),n("h4",{attrs:{id:"options-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#options-api"}},[t._v("#")]),t._v(" Options API")]),t._v(" "),n("ul",[n("li",[t._v("Options API 包含一个描述组件选项 (data、methods、props 等)的对象")]),t._v(" "),n("li",[t._v("Options API 开发复杂组件，同一个功能逻辑的代码被拆分到不同选项")])]),t._v(" "),n("h4",{attrs:{id:"options-api-demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#options-api-demo"}},[t._v("#")]),t._v(" Options API Demo")]),t._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      position"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        x"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        y"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroyed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("positions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("h4",{attrs:{id:"composition-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composition-api"}},[t._v("#")]),t._v(" Composition API")]),t._v(" "),n("ul",[n("li",[t._v("Vue.js 3.x 新增的一组 API")]),t._v(" "),n("li",[t._v("一组基于函数的 API")]),t._v(" "),n("li",[t._v("可以更灵活的组织组件的逻辑")])]),t._v(" "),n("h4",{attrs:{id:"composition-demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composition-demo"}},[t._v("#")]),t._v(" Composition Demo")]),t._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onMounted"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onUnmounted "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMousePosition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" position "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    x"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    y"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("update")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUnmounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" position "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMousePosition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useMousePosition提取到公共模块中，然后直接导入即可")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br")])]),n("h4",{attrs:{id:"两种-api-代码分布对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#两种-api-代码分布对比"}},[t._v("#")]),t._v(" 两种 api 代码分布对比")]),t._v(" "),n("p",[n("code",[t._v("Composition API")]),t._v(" 提供了一个基于函数 "),n("code",[t._v("API")]),t._v("，让我们可以更灵活组织组件的逻辑，使用 "),n("code",[t._v("Composition API")]),t._v(" 可以更合理的组织代码结构，还可把一些功能提取出来，方便其他组件复用")]),t._v(" "),n("p",[n("img",{attrs:{src:a(339),alt:"note"}})]),t._v(" "),n("h2",{attrs:{id:"性能提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能提升"}},[t._v("#")]),t._v(" 性能提升")]),t._v(" "),n("h3",{attrs:{id:"响应式系统升级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#响应式系统升级"}},[t._v("#")]),t._v(" 响应式系统升级")]),t._v(" "),n("ul",[n("li",[t._v("Vue.js 2.x 中响应式吸用的核心 defineProperty")]),t._v(" "),n("li",[t._v("Vue.js 3.x 中使用 Proxy 对象重写响应式系统\n"),n("ul",[n("li",[t._v("可以监听懂爱新增的属性")]),t._v(" "),n("li",[t._v("可以监听删除的属性")]),t._v(" "),n("li",[t._v("可以监听数组的索引和 length 属性")])])])]),t._v(" "),n("h2",{attrs:{id:"编译优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译优化"}},[t._v("#")]),t._v(" 编译优化")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Vue.js 2.x 中通过标记静态根节点，优化 diff 的过程")])]),t._v(" "),n("li",[n("p",[t._v("Vue.js 3.x 中标记和提升所有的静态根节点，diff 的时候只需要对比动态节点内容")]),t._v(" "),n("ul",[n("li",[t._v("Fragments (升级 vetur 插件)")]),t._v(" "),n("li",[t._v("静态提升")]),t._v(" "),n("li",[t._v("Patch flag")]),t._v(" "),n("li",[t._v("缓存事件处理函数")])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://vue-next-template-explorer.netlify.app/#%7B%22src%22%3A%22%3Ctemplate%3E%5Cr%5Cn%20%20%3Cdiv%20id%3D%5C%22app%5C%22%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3E%20static%20root%5Cr%5Cn%20%20%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cbutton%20%40click%3D%5C%22handle%5C%22%3Ebutton%3C%2Fbutton%3E%5Cr%5Cn%20%20%3C%2Fdiv%3E%5Cr%5Cn%3C%2Ftemplate%3E%5Cr%5Cn%22%2C%22ssr%22%3Afalse%2C%22options%22%3A%7B%22mode%22%3A%22function%22%2C%22prefixIdentifiers%22%3Afalse%2C%22optimizeImports%22%3Afalse%2C%22hoistStatic%22%3Afalse%2C%22cacheHandlers%22%3Afalse%2C%22scopeId%22%3Anull%2C%22inline%22%3Afalse%2C%22ssrCssVars%22%3A%22%7B%20color%20%7D%22%2C%22bindingMetadata%22%3A%7B%22TestComponent%22%3A%22setup%22%2C%22foo%22%3A%22setup%22%2C%22bar%22%3A%22props%22%7D%7D%7D",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 3 Template Explorer 模板编译沙盒"),n("OutboundLink")],1)])])]),t._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[t._v("Vue 3 Template Explorer")]),t._v(" "),n("iframe",{staticStyle:{width:"100%",height:"500px",border:"0px","border-radius":"4px",overflow:"hidden","--darkreader-inline-border-top":"initial","--darkreader-inline-border-right":"initial","--darkreader-inline-border-bottom":"initial","--darkreader-inline-border-left":"initial"},attrs:{src:"https://vue-next-template-explorer.netlify.app/#%7B%22src%22%3A%22%3Ctemplate%3E%5Cr%5Cn%20%20%3Cdiv%20id%3D%5C%22app%5C%22%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3E%20static%20root%5Cr%5Cn%20%20%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cdiv%3Estatic%20node%3C%2Fdiv%3E%5Cr%5Cn%20%20%20%20%3Cbutton%20%40click%3D%5C%22handle%5C%22%3Ebutton%3C%2Fbutton%3E%5Cr%5Cn%20%20%3C%2Fdiv%3E%5Cr%5Cn%3C%2Ftemplate%3E%5Cr%5Cn%22%2C%22ssr%22%3Afalse%2C%22options%22%3A%7B%22mode%22%3A%22function%22%2C%22prefixIdentifiers%22%3Afalse%2C%22optimizeImports%22%3Afalse%2C%22hoistStatic%22%3Afalse%2C%22cacheHandlers%22%3Afalse%2C%22scopeId%22%3Anull%2C%22inline%22%3Afalse%2C%22ssrCssVars%22%3A%22%7B%20color%20%7D%22%2C%22bindingMetadata%22%3A%7B%22TestComponent%22%3A%22setup%22%2C%22foo%22%3A%22setup%22%2C%22bar%22%3A%22props%22%7D%7D%7D",title:"vue-20-template-compilation",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin","data-darkreader-inline-border-top":"","data-darkreader-inline-border-right":"","data-darkreader-inline-border-bottom":"","data-darkreader-inline-border-left":""}})]),t._v(" "),n("h2",{attrs:{id:"源码体积的优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源码体积的优化"}},[t._v("#")]),t._v(" 源码体积的优化")]),t._v(" "),n("ul",[n("li",[t._v("Vue.js 中移除了一些不常用的 API\n"),n("ul",[n("li",[t._v("例如: inline-template 、filter 等，可以最终让代码的体积变小")])])]),t._v(" "),n("li",[t._v("Tree-shaking 依赖 ES Module，也就是 import export 通过编译阶段的静态的分析，找到没有引用的代码，直接打包的时候过滤调，让体积更小")])]),t._v(" "),n("h2",{attrs:{id:"vite"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite"}},[t._v("#")]),t._v(" Vite")]),t._v(" "),n("p",[t._v("Vite 是一个构建工具，它比 webpack-cli 更快")]),t._v(" "),n("ul",[n("li",[t._v("现代浏览器都支持 ES Module (IE 不支持)")]),t._v(" "),n("li",[t._v("通过下面的方式加载模块\n"),n("ul",[n("li",[n("code",[t._v('<script type=" module" src="…" ><\/script>')])])])]),t._v(" "),n("li",[t._v("支持模块的 script 默认延迟加载\n"),n("ul",[n("li",[t._v("类似于 script 标签设置 defer")]),t._v(" "),n("li",[t._v("在文档解析完成后，触发 DOMContentLoaded 事件前执行")])])])]),t._v(" "),n("h3",{attrs:{id:"vite-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-介绍"}},[t._v("#")]),t._v(" Vite 介绍")]),t._v(" "),n("p",[t._v("Vite 使用现代浏览器支持的 ES Module 的方式，避免开发环境打包，从而提升开发速度")]),t._v(" "),n("h4",{attrs:{id:"vite-as-vue-cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-as-vue-cli"}},[t._v("#")]),t._v(" Vite as Vue-Cli")]),t._v(" "),n("ul",[n("li",[t._v("Vite 在开发模式下不需要打包可以直接运行")]),t._v(" "),n("li",[t._v("Vue-Cli 开发模式下必须对项目打包才可以运行")])]),t._v(" "),n("h4",{attrs:{id:"vite-的特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-的特点"}},[t._v("#")]),t._v(" Vite 的特点")]),t._v(" "),n("ul",[n("li",[t._v("快速冷启动")]),t._v(" "),n("li",[t._v("按需编译")]),t._v(" "),n("li",[t._v("模块热更新")]),t._v(" "),n("li",[t._v("Vite 在生产环境下使用 Rollup 打包")]),t._v(" "),n("li",[t._v("基于 ES Module 的方式打包")]),t._v(" "),n("li",[t._v("Vue-Cli 使用 Webpack 打包")])]),t._v(" "),n("h4",{attrs:{id:"vite-创建项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-创建项目"}},[t._v("#")]),t._v(" Vite 创建项目")]),t._v(" "),n("p",[t._v("npm")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init vite-app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("yarn")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create vite-app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dev\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("基于模版创建项目")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("npm init vite-app --template react\nnpm init vite-app --template preact\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);