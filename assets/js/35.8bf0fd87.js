(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{432:function(e,t,n){e.exports=n.p+"assets/img/1.a32c01c6.png"},623:function(e,t,n){"use strict";n.r(t);var s=n(18),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"虚拟-dom（virtual-dom）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟-dom（virtual-dom）"}},[e._v("#")]),e._v(" 虚拟 DOM（Virtual DOM）")]),e._v(" "),s("h2",{attrs:{id:"什么是-virtual-dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-virtual-dom"}},[e._v("#")]),e._v(" 什么是 Virtual DOM")]),e._v(" "),s("ul",[s("li",[e._v("Virtual DOM(虚拟 DOM)，是由普通的 JS 对象来描述 DOM 对象，因为不是真实的 DOM 对象，所以叫 Virtual DOM")]),e._v(" "),s("li",[e._v("真实 DOM 成员")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("let element = document.querySelector('#app')\nlet s = ''\nfor (var key in element) {\ns += key + ','\n}\nconsole.log(s)\n// 打印结果\nalign,title,lang,translate,dir,hidden,accessKey,draggable,spellcheck,aut\nocapitalize,contentEditable,isContentEditable,inputMode,offsetParent,off\nsetTop,offsetLeft,offsetWidth,offsetHeight,style,innerText,outerText,onc\nopy,oncut,onpaste,onabort,onblur,oncancel,oncanplay,oncanplaythrough,onc\nhange,onclick,onclose,oncontextmenu,oncuechange,ondblclick,ondrag,ondrag\nend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,ondurationchan\nge,onemptied,onended,onerror,onfocus,oninput,oninvalid,onkeydown,onkeypr\ness,onkeyup,onload,onloadeddata,onloadedmetadata,onloadstart,onmousedown\n,onmouseenter,onmouseleave,onmousemove,onmouseout,onmouseover,onmouseup,\nonmousewheel,onpause,onplay,onplaying,onprogress,onratechange,onreset,on\nresize,onscroll,onseeked,onseeking,onselect,onstalled,onsubmit,onsuspend\n,ontimeupdate,ontoggle,onvolumechange,onwaiting,onwheel,onauxclick,ongot\npointercapture,onlostpointercapture,onpointerdown,onpointermove,onpointe\nrup,onpointercancel,onpointerover,onpointerout,onpointerenter,onpointerl\neave,onselectstart,onselectionchange,onanimationend,onanimationiteration\n,onanimationstart,ontransitionend,dataset,nonce,autofocus,tabIndex,click\n,focus,blur,enterKeyHint,onformdata,onpointerrawupdate,attachInternals,n\namespaceURI,prefix,localName,tagName,id,className,classList,slot,part,at\ntributes,shadowRoot,assignedSlot,innerHTML,outerHTML,scrollTop,scrollLef\nt,scrollWidth,scrollHeight,clientTop,clientLeft,clientWidth,clientHeight\n,attributeStyleMap,onbeforecopy,onbeforecut,onbeforepaste,onsearch,eleme\nntTiming,previousElementSibling,nextElementSibling,children,firstElement\nChild,lastElementChild,childElementCount,onfullscreenchange,onfullscreen\nerror,onwebkitfullscreenchange,onwebkitfullscreenerror,setPointerCapture\n,releasePointerCapture,hasPointerCapture,hasAttributes,getAttributeNames\n,getAttribute,getAttributeNS,setAttribute,setAttributeNS,removeAttribute\n,removeAttributeNS,hasAttribute,hasAttributeNS,toggleAttribute,getAttrib\nuteNode,getAttributeNodeNS,setAttributeNode,setAttributeNodeNS,removeAtt\nributeNode,closest,matches,webkitMatchesSelector,attachShadow,getElement\nsByTagName,getElementsByTagNameNS,getElementsByClassName,insertAdjacentE\nlement,insertAdjacentText,insertAdjacentHTML,requestPointerLock,getClien\ntRects,getBoundingClientRect,scrollIntoView,scroll,scrollTo,scrollBy,scr\nollIntoViewIfNeeded,animate,computedStyleMap,before,after,replaceWith,re\nmove,prepend,append,querySelector,querySelectorAll,requestFullscreen,web\nkitRequestFullScreen,webkitRequestFullscreen,createShadowRoot,getDestina\ntionInsertionPoints,ELEMENT_NODE,ATTRIBUTE_NODE,TEXT_NODE,CDATA_SECTION_\nNODE,ENTITY_REFERENCE_NODE,ENTITY_NODE,PROCESSING_INSTRUCTION_NODE,COMME\nNT_NODE,DOCUMENT_NODE,DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT_NODE,NOTATION\n_NODE,DOCUMENT_POSITION_DISCONNECTED,DOCUMENT_POSITION_PRECEDING,DOCUMEN\nT_POSITION_FOLLOWING,DOCUMENT_POSITION_CONTAINS,DOCUMENT_POSITION_CONTAI\nNED_BY,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC,nodeType,nodeName,baseU\nRI,isConnected,ownerDocument,parentNode,parentElement,childNodes,firstCh\nild,lastChild,previousSibling,nextSibling,nodeValue,textContent,hasChild\nNodes,getRootNode,normalize,cloneNode,isEqualNode,isSameNode,compareDocu\nmentPosition,contains,lookupPrefix,lookupNamespaceURI,isDefaultNamespace\n,insertBefore,appendChild,replaceChild,removeChild,addEventListener,remo\nveEventListener,dispatchEvent\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br"),s("span",{staticClass:"line-number"},[e._v("39")]),s("br"),s("span",{staticClass:"line-number"},[e._v("40")]),s("br"),s("span",{staticClass:"line-number"},[e._v("41")]),s("br"),s("span",{staticClass:"line-number"},[e._v("42")]),s("br"),s("span",{staticClass:"line-number"},[e._v("43")]),s("br"),s("span",{staticClass:"line-number"},[e._v("44")]),s("br"),s("span",{staticClass:"line-number"},[e._v("45")]),s("br"),s("span",{staticClass:"line-number"},[e._v("46")]),s("br"),s("span",{staticClass:"line-number"},[e._v("47")]),s("br"),s("span",{staticClass:"line-number"},[e._v("48")]),s("br"),s("span",{staticClass:"line-number"},[e._v("49")]),s("br"),s("span",{staticClass:"line-number"},[e._v("50")]),s("br"),s("span",{staticClass:"line-number"},[e._v("51")]),s("br"),s("span",{staticClass:"line-number"},[e._v("52")]),s("br"),s("span",{staticClass:"line-number"},[e._v("53")]),s("br"),s("span",{staticClass:"line-number"},[e._v("54")]),s("br")])]),s("ul",[s("li",[e._v("可以使用 Virtual DOM 来描述真实 DOM，示例")])]),e._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"sel"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"children"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" undefined"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"text"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Hello Virtual DOM"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"elm"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" undefined"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"key"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" undefined\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("h2",{attrs:{id:"为什么使用-virtual-dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用-virtual-dom"}},[e._v("#")]),e._v(" 为什么使用 Virtual DOM")]),e._v(" "),s("ul",[s("li",[e._v("手动操作 DOM 比较麻烦，还需要考虑浏览器兼容性问题，虽然有 jQuery 等库简化 DOM 操作，但是随着项目的复杂 DOM 操作复杂提升")]),e._v(" "),s("li",[e._v("为了简化 DOM 的复杂操作于是出现了各种 MVVM 框架，MVVM 框架解决了视图和状态的同步问题")]),e._v(" "),s("li",[e._v("为了简化视图的操作我们可以使用模板引擎，但是模板引擎没有解决跟踪状态变化的问题，于是 Virtual DOM 出现了")]),e._v(" "),s("li",[e._v("Virtual DOM 的好处是当状态改变时不需要立即更新 DOM，只需要创建一个虚拟树来描述 DOM， Virtual DOM 内部将弄清楚如何有效(diff)的更新 DOM")]),e._v(" "),s("li",[e._v("参考 github 上 "),s("a",{attrs:{href:"https://github.com/Matt-Esch/virtual-dom",target:"_blank",rel:"noopener noreferrer"}},[e._v("virtual-dom"),s("OutboundLink")],1),e._v(" 的描述\n"),s("ul",[s("li",[e._v("虚拟 DOM 可以维护程序的状态，跟踪上一次的状态")]),e._v(" "),s("li",[e._v("通过比较前后两次状态的差异更新真实 DOM")])])])]),e._v(" "),s("h2",{attrs:{id:"虚拟-dom-的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟-dom-的作用"}},[e._v("#")]),e._v(" 虚拟 DOM 的作用")]),e._v(" "),s("ul",[s("li",[e._v("维护视图和状态的关系")]),e._v(" "),s("li",[e._v("复杂视图情况下提升渲染性能")]),e._v(" "),s("li",[e._v("除了渲染 DOM 以外，还可以实现 SSR(Nuxt.js/Next.js)、原生应用(Weex/React Native)、小程序(mpvue/uni-app)等")])]),e._v(" "),s("p",[s("img",{attrs:{src:n(432),alt:"note"}})]),e._v(" "),s("h2",{attrs:{id:"virtual-dom-库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtual-dom-库"}},[e._v("#")]),e._v(" Virtual DOM 库")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/snabbdom/snabbdom",target:"_blank",rel:"noopener noreferrer"}},[e._v("Snabbdom"),s("OutboundLink")],1),e._v(" "),s("ul",[s("li",[e._v("Vue 2.x 内部使用的 Virtual DOM 就是改造的 Snabbdom")]),e._v(" "),s("li",[e._v("大约 200 SLOC（single line of code）")]),e._v(" "),s("li",[e._v("通过模块可扩展")]),e._v(" "),s("li",[e._v("源码使用 TypeScript 开发")]),e._v(" "),s("li",[e._v("最快的 Virtual DOM 之一")])])]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/Matt-Esch/virtual-dom",target:"_blank",rel:"noopener noreferrer"}},[e._v("virtual-dom"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"案例演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例演示"}},[e._v("#")]),e._v(" 案例演示")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://codesandbox.io/s/jq-demo-5i7qp",target:"_blank",rel:"noopener noreferrer"}},[e._v("jQuery-demo"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://codesandbox.io/s/snabbdom-demo-4hbyb",target:"_blank",rel:"noopener noreferrer"}},[e._v("snabbdom-demo"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);