(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{481:function(s,t){s.exports="data:image/png;base64,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"},482:function(s,t,a){s.exports=a.p+"assets/img/2.433297d0.png"},483:function(s,t,a){s.exports=a.p+"assets/img/3.c123c714.png"},484:function(s,t){s.exports="data:image/png;base64,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"},485:function(s,t,a){s.exports=a.p+"assets/img/5.4635051b.png"},486:function(s,t,a){s.exports=a.p+"assets/img/6.bf0aaaa0.png"},487:function(s,t,a){s.exports=a.p+"assets/img/7.3da6a58c.png"},488:function(s,t,a){s.exports=a.p+"assets/img/8.5cc7a699.png"},489:function(s,t,a){s.exports=a.p+"assets/img/9.e20984d4.png"},490:function(s,t,a){s.exports=a.p+"assets/img/10.9db0ee99.png"},677:function(s,t,a){"use strict";a.r(t);var n=a(18),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"模拟-vite"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模拟-vite"}},[s._v("#")]),s._v(" 模拟 Vite")]),s._v(" "),n("h2",{attrs:{id:"vite-核心功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-核心功能"}},[s._v("#")]),s._v(" Vite 核心功能")]),s._v(" "),n("ul",[n("li",[s._v("静态 Web 服务器\n"),n("ul",[n("li",[s._v("编译单文件组件")]),s._v(" "),n("li",[s._v("拦截浏览器不识别的模块，并处理")])])]),s._v(" "),n("li",[s._v("HMR")])]),s._v(" "),n("h2",{attrs:{id:"vite-工作步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-工作步骤"}},[s._v("#")]),s._v(" Vite 工作步骤")]),s._v(" "),n("p",[s._v("当启动 Vite 的时候，首先会将当前项目目录作为静态 web 服务器的根目录。")]),s._v(" "),n("p",[s._v("静态 web 服务器会拦截部分请求，例如当请求单文件组件的时候会实时编译，以及处理其他浏览器不能识别的模块（非 JS 模块）。")]),s._v(" "),n("p",[s._v("通过 web socket 实现 HMR（暂不模拟）。")]),s._v(" "),n("h2",{attrs:{id:"创建-vue3-x-项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-vue3-x-项目"}},[s._v("#")]),s._v(" 创建 Vue3.x 项目")]),s._v(" "),n("p",[s._v("用于测试我们模拟的 vite 工具")]),s._v(" "),n("h3",{attrs:{id:"npm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" npm")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init vite-app vite-test-demo\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vite-test-demo\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"yarn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[s._v("#")]),s._v(" yarn")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" create vite-app vite-test-demo\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vite-test-demo\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"初始化-wuner-vite-cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化-wuner-vite-cli"}},[s._v("#")]),s._v(" 初始化 wuner-vite-cli")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" wuner-vite-cli\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" wuner-vite-cli\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("index.js\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" init -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"安装依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),n("p",[s._v("Vite 内部使用 Koa 开启静态 Web 服务器。")]),s._v(" "),n("p",[s._v("koa-send：静态文件处理的中间件。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" koa koa-send\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),n("p",[s._v("配置 "),n("code",[s._v("bin")]),s._v(" 字段，默认执行的 js 文件的路径：")]),s._v(" "),n("p",[n("code",[s._v("package.json")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wuner-vite-cli"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MIT"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"koa"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.13.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"koa-send"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^5.0.1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"静态-web-服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#静态-web-服务器"}},[s._v("#")]),s._v(" 静态 web 服务器")]),s._v(" "),n("p",[s._v("使用 "),n("code",[s._v("koa")]),s._v(" 开发静态 "),n("code",[s._v("web")]),s._v(" 服务器，默认返回根目录中的 "),n("code",[s._v("index.html")])]),s._v(" "),n("p",[s._v("创建一个中间件，负责处理静态文件，默认加载当前目录下（运行该命令行工具的目录中的 "),n("code",[s._v("index.html")]),s._v("）。")]),s._v(" "),n("p",[n("code",[s._v("index.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Koa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" send "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-send'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建实例")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 开启静态文件服务器")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server running @ http://localhost:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h2",{attrs:{id:"link"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#link"}},[s._v("#")]),s._v(" link")]),s._v(" "),n("p",[n("code",[s._v("wuner-vite-cli")]),s._v(" 根目录下运行")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("在 "),n("code",[s._v("vite-test-demo")]),s._v(" 根目录下运行")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("wuner-vite-cli\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用浏览器访问 http://localhost:3000")]),s._v(" "),n("p",[s._v("这时你将看到报错，如下图")]),s._v(" "),n("p",[n("img",{attrs:{src:a(481),alt:"notes"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(482),alt:"notes"}})]),s._v(" "),n("p",[s._v('在导入 vue 模块的时候，前面没有浏览器要求的相对路径地址（"/", "./", or "../"）。')]),s._v(" "),n("p",[s._v("这种方式的导入，期望的是从 node_modules 中加载模块，这是打包工具的默认行为，但是浏览器不支持。")]),s._v(" "),n("h3",{attrs:{id:"vite-解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-解决方案"}},[s._v("#")]),s._v(" vite 解决方案")]),s._v(" "),n("p",[s._v("使用 "),n("code",[s._v("vite")]),s._v(" 运行 "),n("code",[s._v("vite-test-demo")]),s._v(" 查看：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("vite\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:a(483),alt:"notes"}}),s._v(" "),n("img",{attrs:{src:a(484),alt:"notes"}})]),s._v(" "),n("p",[s._v("通过查看 main.js 的 http 请求，我们可以看出 Vite 开启的 web 服务器在加载 main.js 时首先会处理第三方模块的 import 路径：vue => /@modules/vue.js；响应头 Response Headers 返回的 Content-Type 是 application/javascript，作用是告诉浏览器返回的文件是 JavaScript 文件。")]),s._v(" "),n("p",[s._v("所以要在 web 服务器输出之前，先判断一下当前返回的文件是否是 JS 文件。 如果是 JS 文件，再去处理里面第三方模块的路径。 然后在请求 /@modules/vue.js 时处理这个不存在的路径，去 node_modules 中寻找对应的文件。")]),s._v(" "),n("h2",{attrs:{id:"修改第三方模块的路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改第三方模块的路径"}},[s._v("#")]),s._v(" 修改第三方模块的路径")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Koa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" send "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-send'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建实例")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 流转化成字符串\n * @param stream\n * @returns {Promise}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("streamToString")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 读取流是一个异步的过程,所以要返回一个 Promise")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// chunks 存储读取到的 Buffer")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" chunks "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取到的 Buffer")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" chunks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chunk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取完毕,将 Buffer 转化成字符串")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("concat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chunks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取失败")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 开启静态文件服务器")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 修改第三方模块的路径")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断是否是 JS 文件")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/javascript'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ctx.body 是返回给浏览器的 JS 文件,是一个流,要转化成字符串处理")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" contents "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("streamToString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 替换路径并重新赋值 ctx.body")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 替换 `from '` 为 `from '/@modules/`")]),s._v("\n    ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/(from\\s+['\"])(?![\\.\\/])/g")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$1/@modules/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server running @ http://localhost:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("h3",{attrs:{id:"测试-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试-2"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("重新运行脚本测试")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("wuner-vite-cli\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:a(485),alt:"notes"}})]),s._v(" "),n("p",[s._v("如上图所示，我们已经成功修改了 vue 模块加载路径，但是浏览器不识别，我们需要在服务器去加载第三方模块。")]),s._v(" "),n("h2",{attrs:{id:"加载第三方模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加载第三方模块"}},[s._v("#")]),s._v(" 加载第三方模块")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Koa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" send "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-send'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建实例")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 流转化成字符串\n * @param stream\n * @returns {Promise}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("streamToString")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 读取流是一个异步的过程,所以要返回一个 Promise")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// chunks 存储读取到的 Buffer")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" chunks "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取到的 Buffer")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" chunks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chunk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取完毕,将 Buffer 转化成字符串")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("concat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chunks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听读取失败")]),s._v("\n    stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 加载第三方模块")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断路径是否是以 `/@odules/` 开头")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("startsWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/@modules/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 截取模块名称")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" moduleName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取模块的入口文件(ESM模块的入口文件)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 先找到这个模块的 package.json,再获取module字段的值")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pkgPath "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node_modules'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      moduleName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'package.json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pkg "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pkgPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/node_modules'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moduleName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pkg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 开启静态文件服务器")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 修改第三方模块的路径")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server running @ http://localhost:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br")])]),n("h3",{attrs:{id:"测试-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试-3"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("重新运行脚本测试")]),s._v(" "),n("p",[n("img",{attrs:{src:a(486),alt:"notes"}})]),s._v(" "),n("p",[s._v("如上图所示，"),n("code",[s._v("vue")]),s._v(" 模块已成功被加载到，但是有两个浏览器不能识别的模块加载失败 "),n("code",[s._v("App.vue")]),s._v(" 和 "),n("code",[s._v("index.css")])]),s._v(" "),n("p",[s._v("本次只模拟 js 类型处理，我们将注释 css 与 img 引用")]),s._v(" "),n("h3",{attrs:{id:"vite-解决方案-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-解决方案-2"}},[s._v("#")]),s._v(" Vite 解决方案")]),s._v(" "),n("p",[s._v("浏览器只能处理 JS 模块，所以通过 import 加载的其他模块都需要在服务器端处理。")]),s._v(" "),n("p",[s._v("当请求单文件组件的时候，需要在服务器上把单文件组件编译成 JS 模块，然后返回给浏览器。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(487),alt:"notes"}}),s._v(" "),n("img",{attrs:{src:a(488),alt:"notes"}})]),s._v(" "),n("p",[s._v("如上图所示，Vite 中处理单文件组件会发送两次请求：")]),s._v(" "),n("ul",[n("li",[s._v("第一次请求把单文件组件编译成对象")]),s._v(" "),n("li",[s._v("第二次请求编译单文件组件的模板，返回一个 render 函数，并挂载到第一次请求编译的对象的 render 属性上")])]),s._v(" "),n("h2",{attrs:{id:"编译-vue-单文件组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译-vue-单文件组件"}},[s._v("#")]),s._v(" 编译 vue 单文件组件")]),s._v(" "),n("p",[s._v("安装 vue 3.x 编译单文件组件的模块 compiler-sfc")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#npm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @vue/compiler-sfc\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yarn")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @vue/compiler-sfc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Koa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" send "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-send'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" compilerSFC "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vue/compiler-sfc'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Readable "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stream'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建实例")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 流转化成字符串\n * @param stream\n * @returns {Promise}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("streamToString")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 字符串转化成流\n * @param text\n * @returns {*}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("stringToStream")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("text")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" stream "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Readable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 标识 stream 已写完")]),s._v("\n  stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 加载第三方模块")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 开启静态文件服务器")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 处理单文件组件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在获取文件之后,处理第三方模块之前")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断是否是单文件组件")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("endsWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" contents "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("streamToString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Vue 2 的 compiler 返回一个 AST 对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Vue 3 的 compiler 返回一个包含 descriptor 和 errors 的对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" descriptor "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" compilerSFC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第一次请求")]),s._v("\n      code "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" descriptor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 改造code")]),s._v("\n      code "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/export\\s+default\\s+/g")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'const __script = '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 拼接代码")]),s._v("\n      code "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n      import {render as __render} from "')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('?type=template"\n      __script.render = __render\n      export default __script\n      ')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'template'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第二次请求")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" templateRender "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" compilerSFC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("compileTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" descriptor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      code "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" templateRender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 告诉浏览器以 JS 方式识别该返回")]),s._v("\n    ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/javascript'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将code转换成流输出给浏览器")]),s._v("\n    ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringToStream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 修改第三方模块的路径")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server running @ http://localhost:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br")])]),n("h3",{attrs:{id:"测试-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试-4"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("重新运行脚本测试")]),s._v(" "),n("p",[n("img",{attrs:{src:a(489),alt:"notes"}})]),s._v(" "),n("p",[s._v("如上图所示，源码中使用了 process.env.NODE_ENV。")]),s._v(" "),n("p",[s._v("当前代码是在浏览器环境下执行的，process 是 node 环境的对象，浏览器环境没有这个对象，所以报错。")]),s._v(" "),n("p",[s._v("这段源码的作用是让打包工具根据环境变量分别进行生产环境或者开发环境的打包操作。")]),s._v(" "),n("p",[s._v("但是现在没有用打包工具，所以这句代码没有被处理，直接返回给了浏览器。")]),s._v(" "),n("p",[s._v("所以应该在服务器处理一下，在返回 JS 模块之前，应该把 JS 模块中所有 process.env.NODE_ENV 都替换成 development（因为当前是开发环境下）。")]),s._v(" "),n("h2",{attrs:{id:"替换-vue-模块中的环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#替换-vue-模块中的环境变量"}},[s._v("#")]),s._v(" 替换 vue 模块中的环境变量")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Koa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" send "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-send'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" compilerSFC "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vue/compiler-sfc'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Readable "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stream'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建实例")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 流转化成字符串\n * @param stream\n * @returns {Promise}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("streamToString")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 字符串转化成流\n * @param text\n * @returns {*}\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("stringToStream")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("text")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 加载第三方模块")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 开启静态文件服务器")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 处理单文件组件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在获取文件之后,处理第三方模块之前")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 修改第三方模块的路径")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断是否是 JS 文件")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/javascript'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ctx.body 是返回给浏览器的 JS 文件,是一个流,要转化成字符串处理")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" contents "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("streamToString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 替换路径并重新赋值 ctx.body")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 替换 `from '` 为 `from '/@modules/`")]),s._v("\n    ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" contents\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/(from\\s+['\"])(?![\\.\\/])/g")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$1/@modules/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 继续替换 process 对象")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/process\\.env\\.NODE_ENV/g")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"development\"'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server running @ http://localhost:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("h3",{attrs:{id:"测试-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试-5"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("重新运行脚本测试")]),s._v(" "),n("p",[n("img",{attrs:{src:a(490),alt:"notes"}})]),s._v(" "),n("p",[s._v("如上图所示，我们已经可以正常显示页面了")]),s._v(" "),n("h2",{attrs:{id:"源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源码"}},[s._v("#")]),s._v(" "),n("a",{attrs:{href:"https://gitee.com/Wuner/wuner-vite-cli",target:"_blank",rel:"noopener noreferrer"}},[s._v("源码"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);